{% extends "base.html.twig" %}




{% block body %}
    <div>
        {#    header   #}

        <div class="SearchPage-Destination"><!-- react-empty: 1720 -->
            <div class="vz-city-banner"
                 style="background-image: url(http://fooddy.ancorathemes.com/wp-content/uploads/2016/12/home2_slide1.jpg?id=506);">
                <div class="vz-city-banner-content"><h1>Menu</h1>
                    <h2>Prepare , Poste , Partage </h2>
                </div>
            </div>
        </div><!-- react-empty: 1730 -->
        <div class="vz-search-filters-section">
            <div class="filters-list container-fluid">
                <div class="text-center vz-filters-row-6 row">

                    <div class="vz-filter-wrapper">
                        <div class="vz-filter vz-text-primary vz-border-primary"><a class="vz-filter-button"><i
                                        type="map" color="red"
                                        class="vz-icon vz-icon-small vz-icon-map vz-icon-red"></i><span class="vz-text">Carte</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {#    header   #}

        {#    Affichage plat   #}

        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <div class="">
            <div name="eventsList">
                <div class="container menulist">
                    <div class="row">
                        <div class="vz-col-events col-xl-12">
                            <div>
                                <div class="">
                                    <div class="vz-event-section">
                                        <div class="vz-events-list">

                                            {% for plat in plats %}

                                                    {% if plat.groupe.id != '78' %}
                                                        {% for userGroupe in app.user.getGroupe() %}
                                                            {% if plat.groupe.id == userGroupe.id %}

                                                                {% if 'now'|date('y-m-d H:i:s') <= plat.dureeValide|date('y-m-d H:i:s') %}
                                                                    {% if plat.reservation.acheteur == null %}
                                                                        <h4>Nous avons trouver {{ plat|length }} plats pour dans votre secteur </h4>
                                                                        <div class="vz-EventCard vz-SearchEventCard">
                                                                        <button class="vz-wishlist-button EventCard__wishlist-button">
                                                                            <i class="icon-wishlist"></i><!-- react-empty: 5515 -->
                                                                        </button>
                                                                        <div class="EventCard-HeroContainer">
                                                                            <div class="EventCard-NextDate">
                                                                                <div class="EventCard-NextDate__dateContainer">
                                                                        <span class="EventCard-NextDate__dateValue">
                                                                              <div class="duree" data-due-date="{{ plat.dureeValide|date('Y/m/d H:i:s') }}"></div>
                                                                        </span>
                                                                                </div>
                                                                                <div class="EventCard-NextDate__seatsContainer">
                                                                                    <span class="EventCard-NextDate__seatsLabel">Temps restant</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="EventCard__priceTag">
                                                                                <span>{% if plat.prix %}{{ plat.prix }}€{% else %}Gratuit{% endif %}</span>
                                                                            </div>
                                                                            <div class="EventCard__image"
                                                                                 style="background-image: url({{ asset('uploads/images/' ~ plat.imagePlat) }});">

                                                                            </div>
                                                                        </div>
                                                                        <div class="EventCard-InfoContainer">
                                                                            <img src="{{ asset('uploads/images/' ~ plat.getUserPoste().imageUser) }}"
                                                                                 class="EventCard__hostPic avatar img-responsive img-circle">
                                                                            <div class="EventCard-HostInfo">
                                                                                <small class="EventCard__hostText"><!-- react-text: 5529 -->Manger avec
                                                                                    <!-- /react-text --><a dir="auto" href="/users/73237">{{ plat.getUserPoste().username }}</a>
                                                                                    <!-- react-text: 5531 --> à <!-- /react-text --><!-- react-text: 5532 -->{{ plat.getReservation().getCp() }}
                                                                                    <!-- /react-text --></small>
                                                                                {% for cat in plat.categorie %}
                                                                                    <span class="EventCard__eventType">{{ cat.libelle }}</span>
                                                                                {% endfor %}
                                                                                <div class="EventCard__eventTitleContainer"><a class="EventCard__eventTitle" dir="auto"
                                                                                                                               href='{{ path('plat_fiche', {'nom': plat.nomPlat}) }}'>{{ plat.nomPlat }}</a>
                                                                                </div>

                                                                            </div>
                                                                        </div>
                                                                        <div class="EventCard-MoreInfoContainer">
                                                                            <div class="EventCard-RatingContainer"><span class="vz-review-rating"><div
                                                                                            class="vz-review-rating-container"><span
                                                                                                class="vz-review-icon star active"></span><span
                                                                                                class="vz-review-icon star active"></span><span
                                                                                                class="vz-review-icon star active"></span><span
                                                                                                class="vz-review-icon star active"></span><span
                                                                                                class="vz-review-icon star active"></span></div><span
                                                                                            class="vz-review-count"> (18)</span></span></div>
                                                                        </div>
                                                                    </div>
                                                                {% endif %}
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endfor %}
                                                        {% else %}
                                                         {% if 'now'|date('y-m-d H:i:s') <= plat.dureeValide|date('y-m-d H:i:s') %}
                                                         {% if plat.reservation.acheteur == null %}
                                                             <div class="vz-EventCard vz-SearchEventCard">
                                                                 <button class="vz-wishlist-button EventCard__wishlist-button">
                                                                     <i class="icon-wishlist"></i><!-- react-empty: 5515 -->
                                                                 </button>
                                                                 <div class="EventCard-HeroContainer">
                                                                     <div class="EventCard-NextDate">
                                                                         <div class="EventCard-NextDate__dateContainer">
                                                             <span class="EventCard-NextDate__dateValue">
                                                                   <div class="duree" data-due-date="{{ plat.dureeValide|date('Y/m/d H:i:s') }}"></div>
                                                             </span>
                                                                         </div>
                                                                         <div class="EventCard-NextDate__seatsContainer">
                                                                             <span class="EventCard-NextDate__seatsLabel">Temps restant</span>
                                                                         </div>
                                                                     </div>
                                                                     <div class="EventCard__priceTag">
                                                                         <span>{% if plat.prix %}{{ plat.prix }}€{% else %}Gratuit{% endif %}</span>
                                                                     </div>
                                                                     <div class="EventCard__image"
                                                                          style="background-image: url({{ asset('uploads/images/' ~ plat.imagePlat) }});">
                                                                     </div>
                                                                 </div>
                                                                 <div class="EventCard-InfoContainer">
                                                                     <img src="{{ asset('uploads/images/' ~ plat.getUserPoste().imageUser) }}"
                                                                          class="EventCard__hostPic avatar img-responsive img-circle">
                                                                     <div class="EventCard-HostInfo">
                                                                         <small class="EventCard__hostText"><!-- react-text: 5529 -->Manger avec
                                                                             <!-- /react-text --><a dir="auto" href="/users/73237">{{ plat.getUserPoste().username }}</a>
                                                                             <!-- react-text: 5531 --> à <!-- /react-text --><!-- react-text: 5532 -->{{ plat.getReservation().getCp() }}
                                                                             <!-- /react-text --></small>
                                                                         {% for cat in plat.categorie %}
                                                                             <span class="EventCard__eventType">{{ cat.libelle }}</span>
                                                                         {% endfor %}
                                                                         <div class="EventCard__eventTitleContainer"><a class="EventCard__eventTitle" dir="auto"
                                                                                                                        href='{{ path('plat_fiche', {'nom': plat.nomPlat}) }}'>{{ plat.nomPlat }}</a>
                                                                         </div>
                                                                     </div>
                                                                 </div>
                                                                 <div class="EventCard-MoreInfoContainer">
                                                                     <div class="EventCard-RatingContainer"><span class="vz-review-rating"><div
                                                                                     class="vz-review-rating-container"><span
                                                                                         class="vz-review-icon star active"></span><span
                                                                                         class="vz-review-icon star active"></span><span
                                                                                         class="vz-review-icon star active"></span><span
                                                                                         class="vz-review-icon star active"></span><span
                                                                                         class="vz-review-icon star active"></span></div><span
                                                                                     class="vz-review-count"> (18)</span></span></div>
                                                                 </div>
                                                             </div>
                                                             {% endif %}
                                                         {% endif %}
                                                    {% endif %}
                                            {% endfor %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- react-empty: 2309 --></div>
        {#filter#}
    </div>
<br><br>
    {% if is_granted("IS_AUTHENTICATED_REMEMBERED") == false %}

    <div class="">
        <div name="eventsList">
            <div class="container menulist">
                <div class="row">
                    <div class="vz-col-events col-xl-12">
                        <div>
                            <div class="">
                                <div class="vz-event-section">
                                    <div class="vz-events-list">
                                        {% for plat in plats %}

                                            {% if plat.groupe.id == "78" %}
                                                {% if 'now'|date('y-m-d H:i:s') <= plat.dureeValide|date('y-m-d H:i:s') %}
                                                    {% if plat.reservation.acheteur == null %}

                                                        <h4>Nous avons trouver {{ plat|length }} plats pour dans votre secteur </h4>
                                                        <div class="vz-EventCard vz-SearchEventCard">
                                                            <button class="vz-wishlist-button EventCard__wishlist-button">
                                                                <i class="icon-wishlist"></i><!-- react-empty: 5515 -->
                                                            </button>
                                                            <div class="EventCard-HeroContainer">
                                                                <div class="EventCard-NextDate">
                                                                    <div class="EventCard-NextDate__dateContainer">
                                                        <span class="EventCard-NextDate__dateValue">
                                                              <div class="duree"
                                                                   data-due-date="{{ plat.dureeValide|date('Y/m/d H:i:s') }}"></div>
                                                        </span>
                                                                    </div>
                                                                    <div class="EventCard-NextDate__seatsContainer">
                                                                        <span class="EventCard-NextDate__seatsLabel">Temps restant</span>
                                                                    </div>
                                                                </div>
                                                                <div class="EventCard__priceTag">
                                                                    <span>{% if plat.prix %}{{ plat.prix }}€{% else %}Gratuit{% endif %}</span>
                                                                </div>
                                                                <div class="EventCard__image"
                                                                     style="background-image: url({{ asset('uploads/images/' ~ plat.imagePlat) }});">

                                                                </div>
                                                            </div>
                                                            <div class="EventCard-InfoContainer">
                                                                <img src="{{ asset('uploads/images/' ~ plat.getUserPoste().imageUser) }}"
                                                                     class="EventCard__hostPic avatar img-responsive img-circle">
                                                                <div class="EventCard-HostInfo">
                                                                    <small class="EventCard__hostText">
                                                                        <!-- react-text: 5529 -->
                                                                        Rencontrez
                                                                        <!-- /react-text --><a dir="auto"
                                                                                               href="/users/73237">{{ plat.getUserPoste().username }}</a>
                                                                        <!-- react-text: 5531 --> à <!-- /react-text -->
                                                                        <!-- react-text: 5532 -->{{ plat.getReservation().getCp() }}
                                                                        <!-- /react-text --></small>
                                                                    {% for cat in plat.categorie %}
                                                                        <span class="EventCard__eventType">{{ cat.libelle }}</span>
                                                                    {% endfor %}
                                                                    <div class="EventCard__eventTitleContainer"><a
                                                                                class="EventCard__eventTitle"
                                                                                dir="auto"
                                                                                href='{{ path('fos_user_security_login') }}'>{{ plat.nomPlat }}</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="EventCard-MoreInfoContainer">
                                                                <div class="EventCard-RatingContainer"><span
                                                                            class="vz-review-rating"><div
                                                                                class="vz-review-rating-container"><span
                                                                                    class="vz-review-icon star active"></span><span
                                                                                    class="vz-review-icon star active"></span><span
                                                                                    class="vz-review-icon star active"></span><span
                                                                                    class="vz-review-icon star active"></span><span
                                                                                    class="vz-review-icon star active"></span></div><span
                                                                                class="vz-review-count"> (18)</span></span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    {% endif %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br><br>
    <br><br><br>
    {% block javascripts %}
        {{ parent() }}

        <script>

            $(document).ready(function () {
                'use strict';
                $('#form_titre').autocompleter({
                    url_list: '/search-article',
                    url_get: '/?term='
                });

                $("#ui-id-1").click(function () {
                    var id = $("#PlatType").val();

                    if (id.toString().length > 0) {
                        $(location).attr('href', '/plat/' + id.toString());
                    }
                });


                $(".duree").each(function () {
                    $(this).countdown($(this).data("due-date"), function (event) {
                        $(this).text(event.strftime('%H:%M:%S'));
                    });
                });

            });


        </script>
    {% endblock %}
{% endblock %}